(()=>{"use strict";var t={705:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var c=0;c<this.length;c++){var a=this[c][0];null!=a&&(o[a]=!0)}for(var i=0;i<t.length;i++){var d=[].concat(t[i]);n&&o[d[0]]||(r&&(d[2]?d[2]="".concat(r," and ").concat(d[2]):d[2]=r),e.push(d))}},e}},134:(t,e,r)=>{r.d(e,{Z:()=>c});var n=r(705),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".cart{background-color:#f1e4e6}.catalog{background-color:#ebebeb}.catalog_img{height:250px}.cart_img{height:50px}",""]);const c=o},379:(t,e,r)=>{var n,o=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),c=[];function a(t){for(var e=-1,r=0;r<c.length;r++)if(c[r].identifier===t){e=r;break}return e}function i(t,e){for(var r={},n=[],o=0;o<t.length;o++){var i=t[o],d=e.base?i[0]+e.base:i[0],s=r[d]||0,u="".concat(d," ").concat(s);r[d]=s+1;var l=a(u),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==l?(c[l].references++,c[l].updater(h)):c.push({identifier:u,updater:m(h,e),references:1}),n.push(u)}return n}function d(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var c=r.nc;c&&(n.nonce=c)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var s,u=(s=[],function(t,e){return s[t]=e,s.filter(Boolean).join("\n")});function l(t,e,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var c=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(c,a[e]):t.appendChild(c)}}function h(t,e,r){var n=r.css,o=r.media,c=r.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),c&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(c))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,f=0;function m(t,e){var r,n,o;if(e.singleton){var c=f++;r=p||(p=d(e)),n=l.bind(null,r,c,!1),o=l.bind(null,r,c,!0)}else r=d(e),n=h.bind(null,r,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=i(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var o=a(r[n]);c[o].references--}for(var d=i(t,e),s=0;s<r.length;s++){var u=a(r[s]);0===c[u].references&&(c[u].updater(),c.splice(u,1))}r=d}}}}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={id:n,exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class e{constructor(e){t(this,"_products",[]),t(this,"_placeForRender",""),this._placeForRender=e}render(){let t=0;this._placeForRender.innerHTML="<h2>Cart</h2> <br>",0===this._products.length?this._placeForRender.insertAdjacentHTML("beforeend","Cart is empty"):(this._products.forEach((e=>{t+=e.product.getPrice()*e.count;const r=document.createElement("div");r.innerHTML=`\n                <h4>${e.product.getName()}</h4>\n                <img src="${e.product.getImg()}" class="cart_img">\n                Price: $${e.product.getPrice()}\n                Count: ${e.count}\n                <button data-id="${e.product.getId()}" class="cart_btn-countdown">-</button>\n                <button data-id="${e.product.getId()}" class="cart_btn-countup">+</button> \n                <button data-id="${e.product.getId()}" class="cart_btn-remove">Remove</button>\n            `,this._placeForRender.appendChild(r)})),this._placeForRender.insertAdjacentHTML("beforeend",`Total price: $${t}`)),this.addClickListener()}addProduct(t){const e=this._products.find((e=>e.product===t));e?e.count++:this._products.push({product:t,count:1})}addClickListener(){document.querySelectorAll(".cart_btn-countdown").forEach((t=>{t.addEventListener("click",(t=>{this.countDown(t.target.dataset.id),this.render()}))})),document.querySelectorAll(".cart_btn-countup").forEach((t=>{t.addEventListener("click",(t=>{this.countUp(t.target.dataset.id),this.render()}))})),document.querySelectorAll(".cart_btn-remove").forEach((t=>{t.addEventListener("click",(t=>{this.removeProduct(t.target.dataset.id),this.render()}))}))}countDown(t){for(let e=0;e<this._products.length;e++)this._products[e].product.getId()===t&&(this._products[e].count--,0===this._products[e].count&&this._products.splice(e,1))}countUp(t){for(let e=0;e<this._products.length;e++)this._products[e].product.getId()===t&&this._products[e].count++}removeProduct(t){for(let e=0;e<this._products.length;e++)this._products[e].product.getId()===t&&this._products.splice(e,1)}}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class o{constructor({id:t,name:e,price:r,img:o}){n(this,"_id",""),n(this,"_name","Product 1"),n(this,"_price",0),n(this,"_img","/img/product1.png"),this._id=t,this._name=e,this._price=r,this._img=o}getName(){return this._name}getId(){return this._id}getPrice(){return this._price}getImg(){return this._img}}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class a{constructor(t,e){c(this,"_products",[]),c(this,"_placeForRender",""),c(this,"_cart",null),c(this,"_numData",1),c(this,"_canLoadMoreData",!0),this._placeForRender=t,this._cart=e,this.fetchProducts(this._numData)}render(){this._placeForRender.innerHTML="<h2>Catalog</h2><br>",this._products.forEach((t=>{const e=document.createElement("div");e.innerHTML=`\n                <h3>${t.getName()}</h3>\n                <img src="${t.getImg()}" class="catalog_img">\n                Price: $${t.getPrice()} \n                <button data-id="${t.getId()}" class="catalog_add-to-card-button">\n                    Add to cart\n                </button>\n            `,this._placeForRender.appendChild(e)})),this._canLoadMoreData&&(this._placeForRender.insertAdjacentHTML("beforeend",'<button id="loadData">Load more data</button>'),this.addListenerLoadData()),this.addListenerAddToCard()}addProducts(t){this._products=t}fetchProducts(t){return fetch(`/db/data${t}.json`).then((t=>t.json())).then((t=>{let e=[];e=t.data.map((t=>new o(t))),this._products=this._products.concat(e),this.render()})).catch((t=>{console.log(t),this._canLoadMoreData=!1,this.render()}))}addListenerAddToCard(){document.querySelectorAll(".catalog_add-to-card-button").forEach((t=>{t.addEventListener("click",(t=>{const e=this.findProductById(t.target.dataset.id,this._products);e&&(this._cart.addProduct(e),this._cart.render())}))}))}addListenerLoadData(){document.querySelector("#loadData").addEventListener("click",(()=>{this._numData++,this.fetchProducts(this._numData)}))}findProductById(t,e){return e.find((e=>e.getId()===t))}}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=r(379),s=r.n(d),u=r(134);s()(u.Z,{insert:"head",singleton:!1}),u.Z.locals;const l=document.querySelector(".shop");new class{constructor(t){i(this,"_cart",""),i(this,"_catalog","");const r=document.createElement("div");r.classList.add("cart"),t.appendChild(r);const n=document.createElement("div");n.classList.add("catalog"),t.appendChild(n),this._cart=new e(r),this._catalog=new a(n,this._cart)}}(l)})()})();